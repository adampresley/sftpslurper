class Shim{constructor(closeOnClick=!1,onShimClick){this.closeOnClick=closeOnClick,this.onShimClick=onShimClick,this.shim=void 0}show(){this.shim||document.getElementsByClassName("shim").length?document.getElementsByClassName("shim").length&&(this.shim=document.getElementsByClassName("shim")[0]):(this.shim=document.createElement("div"),this.shim.classList.add("shim"),this.closeOnClick&&this.shim.addEventListener("click",()=>{this.hide(this.onShimClick)}),document.body.appendChild(this.shim))}hide(callback){this._destroy(),"function"==typeof callback&&callback()}_destroy(){this.shim&&(this.shim.remove(),this.shim=void 0)}}class Confirmer{constructor(){}confirm(message,callback){this.show("confirm",message,callback)}yesNo(message){return new Promise(resolve=>{this.show("yesno",message,result=>resolve(result))})}show(type,message,callback){let e=new Shim(!0,()=>{this._close(t,callback,!1)});const t=Object.assign(document.createElement("dialog"),{className:"confirm-container",innerHTML:`<p>${message}</p>`});t.setAttribute("open",!0),this._addButtons(t,type,e,callback),e.show(),document.body.appendChild(t)}_close(container,callback,callbackValue){container.remove(),"function"==typeof callback&&callback(callbackValue)}_addButtons(container,type,shim,callback){let t=[];if("yesno"===type){const c=Object.assign(document.createElement("button"),{innerText:"No",className:"cancel-button"}),n=(c.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),shim.hide(!1),this._close(container,callback,!1)}),Object.assign(document.createElement("button"),{innerText:"Yes",className:"action-button"}));n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),shim.hide(!1),this._close(container,callback,!0)}),t.push(c,n)}else{const i=Object.assign(document.createElement("button"),{innerText:"Close",className:"action-button"});i.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),shim.hide(!1),this._close(container,callback)}),t.push(i)}const s=Object.assign(document.createElement("div"),{className:"button-row"});s.append(...t),container.appendChild(s)}}export{Confirmer};